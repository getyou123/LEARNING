### 数仓的定义：

    1. 面向主题。主要是给数据分类方便理解和管理。
       2. 集成。汇总多个源端系统数据甚至是异构数据源，到一个统一的相互兼容的数据存储内，使后续的分析关联更加容易。
      3. 相对稳定。对数据的操作大多是 Insert，很少有 Update、Delete。
      4. 反应历史变化。存储大量的历史数据,保留历史所有数据的状态，进而找出企业经营管理中的规律。我觉得这里应该包含两个层面：业务的历史变化规律、维度数据的历史变化。
      用于支持管理决策。这是构建数仓的目的。但是发展到现在，数仓已经在别的很多地方开始发挥作用了。

### 三范式：经典的关系数据模型规范理论

1. 属性不可拆分。保证列的原子性。例如不能把学生的的学号、名称、班级号都塞在一个字段里面
2. 每个属性有且仅依赖于主键（主键的定义：能够唯一确定一条数据的列或列组合）。
   属性不能传递依赖于主键。如果有就分表。例如行政区划的省市县三层划分必须建三张表，省市的名称不能放到区县的那张表里（当然这种情况下，维度建模通常是反三范式的）

### 关于维度建模和范式建模？

- 维度建模：强调事实和维度的概念，维度建模的产出是`星型模型`或者是`雪花模型`，模型其实就是在论述表和表直接的关系
- 范式建模：一种基于E-R图的，每个E存一个表，每个R存一个表，很少冗余信息的，需要大量的join的，减少存储消耗的；构建过程是从下到上的，
- ![](https://raw.githubusercontent.com/getyou123/git_pic_use/master/zz202305041755024.png)
- ![](https://raw.githubusercontent.com/getyou123/git_pic_use/master/zz202305041757979.png)
- ![](https://raw.githubusercontent.com/getyou123/git_pic_use/master/zz202305041757946.png)

### 什么是事实表，什么是维度表，什么是维度，什么是指标？

- 事实表就是要研究和分析对象，常见的比如是订单，或者其他的业务过程
- 维度表就是研究对象的时候研究的角度，从哪个角度去看研究对象，比如研究订单的日期，那么时间就是一个维度表
- 维度：就是角度，比如 日期
- 指标：其实是如何去量化研究的结果，日期角度来看的下单量
- 维度+指标：从哪些角度去事实表+看出来哪些指标

### 雪花模型和星型模型的区别，如何转化呢？

- 星型模型 ![](https://raw.githubusercontent.com/getyou123/git_pic_use/master/zz202305041807891.png)
- 雪花模型 ![](https://raw.githubusercontent.com/getyou123/git_pic_use/master/zz202305041809686.png)

根据项目经验，一般建议使用星型模型。因为在实际项目中，往往最关注的是查询性能问题，至于磁盘空间一般都不是问题。当然，在维度表数据量极大，需要节省存储空间的情况下，或者是业务逻辑比较复杂、必须要体现清晰的层次概念情况下，可以使用雪花型模型。

### 维度建模理论？

关注事实，即关注指标的落点，允许大量的冗余，减少join等操作，按照星星模型去组织这些表，描述他们的关系

1. 维度表的分类：
   多维分析的基本操作：
   1. 钻取：上卷或下钻。通过调整维度的个数，来变换分析的粒度。
   2. 切片与切块：选取整体的部分维度去看度量，选两个就是切片，三个或以上是切块
   3. 旋转:例如行列转换
2. 事实表的分类：
3. 总线结构和总线矩阵：![](https://raw.githubusercontent.com/getyou123/git_pic_use/master/zz202305041811540.png)
4. 管理产出指标的结果表：![](https://raw.githubusercontent.com/getyou123/git_pic_use/master/zz202305041813943.png)

